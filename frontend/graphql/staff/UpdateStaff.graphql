mutation (
    $address: String!,
    $archive_reason: String,
    $bio: String,
    $contact_num: Int!,
    $dob: date!,
    $gender: bpchar!,
    $is_active: Boolean!,
    $is_speech_therapist: Boolean!,
    $name: String!,
    $nickname: String,
    $profession: String!,
    $role: roles_enum!,
    $ws_place: String,
    $staff_id: Int!,
    $supervisors_to_add: [staff_supervisors_insert_input!]!,
    $supervisors_to_remove: [Int!]!,
    $languages_to_add: [staff_languages_insert_input!]!,
    $languages_to_remove: [languages_enum!],
    $projects_to_add: [project_staffs_insert_input!]!,
    $projects_to_remove: [Int!],
    $updateNotification: UpdateNotificationsInput!
) {
    insert_staff_supervisors(objects: $supervisors_to_add) {
        affected_rows
    }

    delete_staff_supervisors(where: {
        _and: [
            {
                supervisor_id: {_in: $supervisors_to_remove},
                staff_id: { _eq: $staff_id}
            }
        ]
    }) {
        affected_rows
    }

    insert_staff_languages(objects: $languages_to_add) {
        affected_rows
    }

    delete_staff_languages(where: {
        _and: [
            {
                staff_id: {_eq: $staff_id},
                language: {_in: $languages_to_remove}
            }
        ]
    }) {
        affected_rows
    }

    insert_project_staffs(objects: $projects_to_add) {
        affected_rows
    }

    delete_project_staffs(where: {
       _and: [
           {
               staff_id: {_eq: $staff_id},
               project_id: {_in: $projects_to_remove}
           }
       ]
    }) {
       affected_rows
    }

    update_staffs(_set: {address: $address, archive_reason: $archive_reason, bio: $bio, contact_num: $contact_num, dob: $dob, gender: $gender, is_active: $is_active, is_speech_therapist: $is_speech_therapist, name: $name, nickname: $nickname, profession: $profession, role: $role, ws_place: $ws_place}, where: {id: {_eq: $staff_id}}) {
        affected_rows
        returning {
            address
            archive_reason
            bio
            contact_num
            date_joined
            dob
            email
            gender
            id
            is_active
            is_speech_therapist
            languages {
                language
            }
            name
            nickname
            profession
            role_description {
                description
                role
            }
            supervisors {
                supervisor {
                    id
                    name
                }
            }
            ws_place
            projects_in {
                project {
                    title
                }
            }
        }
    }
  UpdateNotifications (updateNotificationData: $updateNotification) {
    status
    message
  }
}

# {
#    "address": "4 Road road",
#    "archive_reason": null,
#    "bio": "",
#    "contact_num": 1,
#    "dob": "1999-09-09",
#    "gender": "M",
#    "is_active": true,
#    "is_speech_therapist": false,
#    "name": "test4",
#    "nickname": "",
#    "profession": "",
#    "role": "core_volunteer",
#    "ws_place": null,
#    "staff_id": 60,
#    "supervisors_to_add": [{"staff_id": 60, "supervisor_id": 2}],      #list of objects with staff_id and supervisor_id fields
#    "supervisors_to_remove": [2],      #list of integers of supervisor_id, put all that you want to remove or MORE (not added before but not going to add also can put)
#    "languages_to_add": [{"staff_id": 60, "language": "Chinese"}],     #list of objects with staff_id and language fields
#    "languages_to_remove": ["Chinese"],        #list of strings of languages enums, put all that you want to remove or MORE (not added before but not going to add also can put)
#    "projects_to_add": [{"staff_id": 60, "project_id": 1}],        #list of objects with staff_id and project_id fields
#    "projects_to_remove": [1],     #list of integers of project_id, put all that you want to remove or MORE (not added before but not going to add also can put)
#    "updateNotification": {
#     "old": {"JSON of Staff Object": "Hi"},
#     "new": {"JSON of above fields": "Hi"}
#   }
# }
